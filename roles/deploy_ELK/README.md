deploy_ELK
=========

Деплоит docker-compose файл с конфигами для контейнеров.
При первом запуске генерирует сертификат, копирует его на замаунченую директорию, оттуда его используют все части приложения. В последующие запуски используется тот же самый сертификат, а контейнер для startup игнорируется.

В качестве примера используется filebeat который подаёт внутренние логи docker на определенный порт logstash. Так же logstash и filebeat создают для примера две директории в директории с docker-compose на хосте.

Почему так? Ну, я делал и тестировал docker-compose локально. У меня нет возможности проверить это всё на виртуалке, позволить я себе могу только слабомощные с 1гб озу, на таком железе ELK просто не запустится. Был бы 300кк/наносек просто арендовал бы виртуалок и собирал логи с парочки серверов на сервер с ELK.

Впрочем, это не должно вызывать проблем, и при минимальной доработке должно работать как надо, ведь для этого же и придумали контейнеризацию, ねえ? Хотя в задании вообще об этом ни слова, просто установить ELK-стек, ну, я это сделал.

В самой роли ничего особенного, устанавливает docker-engine, запускает его, копирует файлы конфигурации, и запускает ELK. Данные сервисов так же mounted на хосте, и при перезапуске не потеряются.